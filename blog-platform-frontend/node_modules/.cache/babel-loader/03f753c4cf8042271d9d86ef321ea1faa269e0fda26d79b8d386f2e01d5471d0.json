{"ast":null,"code":"import _objectSpread from\"C:/Users/Arbisjan/Desktop/GIT/Blog Platform/blog-platform-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import API from\"../api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Profile(){const[profile,setProfile]=useState(null);const[form,setForm]=useState({bio:\"\",avatar:null});useEffect(()=>{API.get(\"accounts/profile/\").then(res=>{setProfile(res.data);setForm({bio:res.data.bio||\"\",avatar:null});}).catch(()=>setProfile(null));},[]);const handleChange=e=>{if(e.target.name===\"avatar\"){setForm(_objectSpread(_objectSpread({},form),{},{avatar:e.target.files[0]}));}else{setForm(_objectSpread(_objectSpread({},form),{},{[e.target.name]:e.target.value}));}};const handleSubmit=async e=>{e.preventDefault();const formData=new FormData();formData.append(\"bio\",form.bio);if(form.avatar)formData.append(\"avatar\",form.avatar);await API.put(\"accounts/profile/\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}});window.location.reload();};if(!profile)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Profile\"}),/*#__PURE__*/_jsx(\"img\",{src:profile.avatar?profile.avatar:\"https://via.placeholder.com/100\",alt:\"avatar\",width:\"100\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",profile.username]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",profile.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Reputation: \",profile.reputation]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"textarea\",{name:\"bio\",value:form.bio,onChange:handleChange,placeholder:\"Bio\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",children:\"Update Profile\"})]})]});}export default Profile;","map":{"version":3,"names":["React","useEffect","useState","API","jsx","_jsx","jsxs","_jsxs","Profile","profile","setProfile","form","setForm","bio","avatar","get","then","res","data","catch","handleChange","e","target","name","_objectSpread","files","value","handleSubmit","preventDefault","formData","FormData","append","put","headers","window","location","reload","children","src","alt","width","username","email","reputation","onSubmit","onChange","placeholder","type","className"],"sources":["C:/Users/Arbisjan/Desktop/GIT/Blog Platform/blog-platform-frontend/src/pages/Profile.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport API from \"../api\";\r\n\r\nfunction Profile() {\r\n  const [profile, setProfile] = useState(null);\r\n  const [form, setForm] = useState({ bio: \"\", avatar: null });\r\n\r\n  useEffect(() => {\r\n    API.get(\"accounts/profile/\")\r\n      .then((res) => {\r\n        setProfile(res.data);\r\n        setForm({ bio: res.data.bio || \"\", avatar: null });\r\n      })\r\n      .catch(() => setProfile(null));\r\n  }, []);\r\n\r\n  const handleChange = (e) => {\r\n    if (e.target.name === \"avatar\") {\r\n      setForm({ ...form, avatar: e.target.files[0] });\r\n    } else {\r\n      setForm({ ...form, [e.target.name]: e.target.value });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append(\"bio\", form.bio);\r\n    if (form.avatar) formData.append(\"avatar\", form.avatar);\r\n\r\n    await API.put(\"accounts/profile/\", formData, {\r\n      headers: { \"Content-Type\": \"multipart/form-data\" },\r\n    });\r\n\r\n    window.location.reload();\r\n  };\r\n\r\n  if (!profile) return <p>Loading...</p>;\r\n\r\n  return (\r\n    <div>\r\n      <h2>Profile</h2>\r\n      <img\r\n        src={profile.avatar ? profile.avatar : \"https://via.placeholder.com/100\"}\r\n        alt=\"avatar\"\r\n        width=\"100\"\r\n      />\r\n      <p>Username: {profile.username}</p>\r\n      <p>Email: {profile.email}</p>\r\n      <p>Reputation: {profile.reputation}</p>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <textarea\r\n          name=\"bio\"\r\n          value={form.bio}\r\n          onChange={handleChange}\r\n          placeholder=\"Bio\"\r\n        />\r\n        <input type=\"file\" name=\"avatar\" onChange={handleChange} />\r\n        <button className=\"btn\" type=\"submit\">Update Profile</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}